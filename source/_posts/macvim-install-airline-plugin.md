---
title: MacVim å®‰è£… vim-airline æ’ä»¶
date: 2016-12-11 18:24:55
tags: [Vim]
---

> Emacs æ˜¯ç¥çš„ç¼–è¾‘å™¨ï¼Œè€Œ Vim æ˜¯ç¼–è¾‘å™¨ä¹‹ç¥ã€‚

è¿™å¥è¯ç”±æ¥å·²ä¹…ï¼Œå…·ä½“çš„å‡ºå¤„å·²ç»ä¸å¯è€ƒäº†ã€‚

è¦çœŸè®²èµ·æ¥ï¼Œæˆ‘ä½¿ç”¨ç¼–è¾‘å™¨ä¹‹ç¥ä¹Ÿæœ‰å°å‡ å¹´äº†ï¼Œä½†æ˜¯ä¸€ç›´ä»¥æ¥éƒ½åªæ˜¯æŠŠå®ƒå½“æˆæ™®é€šçš„ç¼–è¾‘å™¨æ¥ä½¿ç”¨äº†ã€‚è¿™æ— å¼‚äºä½¿ç”¨å± é¾™åˆ€æ¥æ€é¸¡ï¼Œæ¯æ¬¡æƒ³èµ·æ¥éƒ½è®©æˆ‘æ„Ÿå­¦ç¾æ„§éš¾å½“ï¼Œè¿™æ¬¡ç—›å®šæ€ç—›ï¼Œå†³å®šå†æŠŠ Vim ç³»ç»Ÿå­¦ä¹ ä¸€éï¼ŒåŠ¡å¿…æŠŠå®ƒå½“æˆæ—¥å¸¸ä½¿ç”¨çš„ç¼–è¾‘å™¨ã€‚

Vim ç¼–è¾‘å™¨æœ€é‡è¦çš„ä¸¤æ ·é›¶ä»¶å°±æ˜¯ .vimrc é…ç½®æ–‡ä»¶å’Œå„ç§å¥½ç”¨çš„æ’ä»¶äº†ã€‚

å…³äº .vimrc é…ç½®æ–‡ä»¶ï¼Œæˆ‘å†³å®šä»é›¶å¼€å§‹ï¼Œåœ¨é‡æ–°å­¦ä¹ çš„è¿‡ç¨‹ä¸­ä¸€è¡Œä¸€è¡Œæ·»åŠ è‡ªå·±éœ€è¦çš„åŠŸèƒ½ï¼Œè€Œéç›´æ¥ä½¿ç”¨ç½‘ä¸Šå„ç§å¤§ç¥å…±äº«çš„é…ç½®æ–‡ä»¶ï¼Œæ¯•ç«Ÿä½¿ç”¨åˆ«äººçš„ä¸œè¥¿éš¾å…è¿˜æ˜¯ä¼šä¸è¶æ‰‹ã€‚

è€Œå¯¹äº Vim æ’ä»¶ï¼Œç°åœ¨å·²ç»æœ‰å¾ˆå¤šå¥½ç”¨çš„æ’ä»¶ç®¡ç†å™¨äº†ï¼Œå®‰è£…æ’ä»¶ä¹Ÿä¸æ˜¯ä»€ä¹ˆå›°éš¾çš„äº‹äº†ã€‚

ä½†æ˜¯ï¼Œåœ¨æˆ‘å®‰è£…ç¬¬ä¸€ä¸ªæ’ä»¶ [vim-airline](https://github.com/vim-airline/vim-airline.git) çš„æ—¶å€™å°±é‡åˆ°äº†ä¸å°‘å‘ï¼Œè¿™é‡Œç”¨ç¯‡æ–‡ç« æ¥è®°å½•ä¸‹ã€‚

<!-- more -->

## Vim æ’ä»¶ç®¡ç†å™¨

å°±åƒä¸Šé¢è®²è¿‡çš„ï¼Œç°åœ¨ç½‘ä¸Šå·²ç»æœ‰å¾ˆå¤šå¥½ç”¨çš„æ’ä»¶ç®¡ç†å™¨äº†ï¼Œæ¯”å¦‚ [Vundle](https://github.com/VundleVim/Vundle.vim.git)ã€[NeoBundle](https://github.com/Shougo/neobundle.vim.git) å’Œ [vim-plug](https://github.com/junegunn/vim-plug.git)ã€‚

å¯¹äºæ–°æ‰‹æ¥è®²ï¼Œéšä¾¿é€‰ä¸€ä¸ªæ¥ä½¿ç”¨å°±è¡Œäº†ã€‚æˆ‘è‡ªå·±ä½¿ç”¨çš„æ˜¯æ›´è½»é‡ï¼Œé€Ÿåº¦æ›´å¿«çš„ vim-plugã€‚

## å®‰è£… vim-plug

vim-plug çš„å®‰è£…éå¸¸ç®€å•ï¼Œåªéœ€è¦ä¸€è¡Œå‘½ä»¤ï¼š

```bash
curl -fLo ~/.vim/autoload/plug.vim --create-dirs \
    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
```

## ä½¿ç”¨ vim-plug å®‰è£… vim-airline

vim-plug æ’ä»¶ç®¡ç†å™¨å®‰è£…å®Œæˆä¹‹åï¼Œå°±å¯ä»¥å¼€å§‹å®‰è£…æ’ä»¶äº†ã€‚

æˆ‘é€‰æ‹©å®‰è£…çš„ç¬¬ä¸€ä¸ªæ’ä»¶æ˜¯ [vim-airline](https://github.com/vim-airline/vim-airline.git)ï¼Œå®ƒæ˜¯ä¸€ä¸ªçŠ¶æ€æ æ’ä»¶ï¼Œå¯ä»¥æ˜¾ç¤ºå½“å‰æ–‡ä»¶çš„å¾ˆå¤šä¿¡æ¯ï¼Œæ›´é‡è¦çš„æ˜¯å®ƒçš„æ•ˆæœå¤Ÿé…·ç‚«ï¼Œå®‰è£…å®Œä¹‹åå¯ä»¥è®©æ•´ä¸ª Vim çš„é€¼æ ¼ä¸Šå‡ä¸€ä¸ªå±‚æ¬¡ã€‚

ä½¿ç”¨ vim-plug å®‰è£…æ’ä»¶ååˆ†ç®€å•ï¼Œåªéœ€è¦åœ¨ .vimrc æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

```bash
" vim-plug
call plug#begin('~/.vim/plugged')

Plug 'vim-airline/vim-airline'

call plug#end()
```

ç„¶åæ‰§è¡Œ `:PlugInstall` å‘½ä»¤ï¼Œåç­‰æ’ä»¶å®‰è£…å®Œæˆå°±å¯ä»¥äº†ã€‚

### é…ç½®å§‹ç»ˆæ˜¾ç¤ºçŠ¶æ€æ 

å®‰è£…å®Œ vim-airline ä¹‹åï¼Œè¿«ä¸åŠå¾…å‘æ‰“å¼€ç¼–è¾‘å™¨ï¼Œç»“æœå‘ç°çŠ¶æ€æ å¹¶æ²¡æœ‰æ˜¾ç¤ºã€‚èµ¶ç´§æ”¾ç‹—æœç´¢ï¼ŒåŸæ¥é»˜è®¤æƒ…å†µä¸‹ Vim çš„çŠ¶æ€æ åªæœ‰åœ¨æœ‰ä¸¤ä¸ªçª—å£çš„æƒ…å†µä¸‹æ‰ä¼šæ˜¾ç¤ºï¼Œå¦‚æœéœ€è¦è®©çŠ¶æ€æ å§‹ç»ˆæ˜¾ç¤ºï¼Œéœ€è¦åœ¨ .vimrc æ–‡ä»¶ä¸­æ‰“å¼€å¦‚ä¸‹é€‰é¡¹ï¼š

```bash
:set laststatus=2
```

### å®‰è£…è¡¥ä¸å­—ä½“

ç°åœ¨çŠ¶æ€æ å¯ä»¥æ˜¾ç¤ºäº†ï¼Œä½†æ˜¯ä½ ä¼šå‘ç°å®ƒçš„æ•ˆæœå¾ˆå·®åŠ²ã€‚è¿™æ˜¯å› ä¸ºç”¨ç³»ç»Ÿè‡ªå¸¦çš„å­—ä½“ä¼šæœ‰å¾ˆå¤šå›¾å½¢ç¬¦å·æ— æ³•æ˜¾ç¤ºï¼Œæ‰€ä»¥ä¸ºäº†è·å¾—æ›´é…·ç‚«çš„æ•ˆæœï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…è¡¥ä¸å­—ä½“ã€‚

å¹¸å¥½è¡¥ä¸å­—ä½“çš„å®‰è£…è¿‡ç¨‹ä¹Ÿä¸å¤æ‚ï¼Œé¦–å…ˆ[åˆ°è¿™é‡Œ](https://github.com/powerline/fonts.git)ä¸‹è½½è¡¥ä¸å­—ä½“ï¼Œä¸‹è½½å®Œä¹‹åæ‰§è¡Œç›®å½•ä¸­çš„ `install.sh` è„šæœ¬ï¼š

```bash
$ cd fonts
$ ./install.sh
```

è¿™æ ·è¡¥ä¸å­—ä½“å°±å®‰è£…å¥½äº†ã€‚


### é…ç½® Vim å­—ä½“

å­—ä½“å®‰è£…å®Œæˆä¹‹åï¼Œæ¥ä¸‹æ¥å°±æ˜¯é…ç½® Vim ä½¿ç”¨çš„å­—ä½“äº†ï¼Œæ³¨æ„è¿™é‡Œæˆ‘ä»¬åªé…ç½®å›¾å½¢åŒ–ç•Œé¢çš„ Vimï¼Œå³ MacVimï¼Œå‘½ä»¤è¡Œä¸‹çš„ Vim ä¼šé»˜è®¤ä½¿ç”¨æ§åˆ¶å°çš„å­—ä½“ã€‚

é¦–å…ˆï¼Œåœ¨ Vim ä¸‹æ‰§è¡Œå‘½ä»¤ï¼š

```bash
:set guifont=*
```

è¿™æ—¶ä¼šå¼¹å‡ºä¸€ä¸ªå­—ä½“é€‰æ‹©å™¨ï¼Œé€‰æ‹©ä½ å–œæ¬¢çš„å­—ä½“ï¼Œæ³¨æ„è¦é€‰æ‹©åç¼€å¸¦æœ‰ **For Powerline** å­—ä½“ï¼Œåªæœ‰è¿™äº›å­—ä½“æ‰æ˜¯è¡¥ä¸å­—ä½“ï¼Œæ‰èƒ½æ­£ç¡®åœ°æ˜¾ç¤ºå›¾å½¢åŒ–ç¬¦å·ã€‚

é€‰æ‹©å®Œæˆç‚¹å‡»ç¡®å®šåï¼Œå†åœ¨ Vim ä¸‹æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š

```bash
:set guifont?
```

è¿™æ—¶åœ¨ç¼–è¾‘å™¨æœ€åº•ä¸‹ä¼šæ˜¾ç¤ºå½“å‰ä½¿ç”¨çš„å­—ä½“ï¼ŒæŠŠè¿™è¡Œå­—è®°ä¸‹æ¥ï¼Œç„¶åæ·»åŠ åˆ° .vimrc æ–‡ä»¶ä¸­ã€‚åŒæ—¶è¿˜è¦è®¾ç½® Vim çš„ç¼–ç ä¸º utf-8ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```bash
set encoding=utf-8

if has("gui_running")
    set guifont=Meslo\ LG\ S\ Regular\ for\ Powerline:h14
endif
```

### é…ç½® vim-airline

è®¾ç½®å®Œè¡¥ä¸å­—ä½“ä¹‹åï¼Œæœ€åä¸€æ­¥å°±æ˜¯å†é…ç½®ä¸€ä¸‹ vim-airline äº†ã€‚

åœ¨ .vimrc ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

```bash
let g:airline_powerline_fonts = 1

if !exists('g:airline_symbols')
  let g:airline_symbols = {}
endif

let g:airline_left_sep = 'î‚°'
let g:airline_left_alt_sep = 'î‚±'
let g:airline_right_sep = 'î‚²'
let g:airline_right_alt_sep = 'î‚³'
let g:airline_symbols.branch = 'î‚ '
let g:airline_symbols.readonly = 'î‚¢'
let g:airline_symbols.linenr = 'Â¶'
let g:airline_symbols.crypt = 'ğŸ”’'
let g:airline_symbols.paste = 'âˆ¥'
```

å¤§åŠŸå‘Šæˆï¼ç°åœ¨å¿«æ‰“å¼€ä½ çš„ Vim çœ‹ä¸‹æ•ˆæœå§ã€‚

å…³äº air-line è¿˜æœ‰å¾ˆå¤šå…¶å®ƒçš„é€‰é¡¹ï¼Œä¸è¿‡é»˜è®¤çš„é€‰é¡¹å°±å·²ç»ç¬¦åˆæˆ‘ç›®å‰çš„ä½¿ç”¨éœ€æ±‚äº†ã€‚æ›´åŠ è¯¦ç»†çš„é…ç½®ï¼Œå¯ä»¥å‚è€ƒå®ƒçš„[å®˜æ–¹æ–‡æ¡£](https://github.com/vim-airline/vim-airline)

ä¸‹é¢æ˜¯æˆ‘æœ€ç»ˆé…ç½®å®Œæˆçš„æ•ˆæœå›¾ï¼š

![My vim-airline](http://7xqonv.com1.z0.glb.clouddn.com/macvim-install-airline-plugin-pic-1.png)

## å°ç»“

ç”¨å¥½ Vim æœ€é‡è¦çš„ä¸€ç‚¹å°±æ˜¯ç»ƒä¹ ï¼Œè€Œä¸”æ˜¯åˆ»æ„ç»ƒä¹ ï¼Œå°† Vim çš„å¸¸ç”¨æ“ä½œéƒ½å˜æˆè‚Œè‚‰è®°å¿†ï¼Œæ‰èƒ½åœ¨ä¸€ç¬é—´å®Œæˆåœ¨å…¶å®ƒäººçœ‹èµ·æ¥åƒæ˜¯å·«æœ¯çš„æ“ä½œã€‚

è¿™é‡Œæ˜¯[æˆ‘çš„ .vimrc é…ç½®æ–‡ä»¶](https://github.com/buginux/vim-configuration)ï¼Œç°åœ¨é‡Œé¢è¿˜æ²¡æœ‰å¤šå°‘å†…å®¹ï¼Œä¸è¿‡æˆ‘ä¼šåœ¨å­¦ä¹ è¿‡ç¨‹ä¸­é€æ¸å¢åŠ å†…å®¹çš„ã€‚
